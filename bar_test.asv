  
%% Initial clearing 
clear all 
close all 
clc 
  
%% Set up 
% Set tabs and tab labels 
NumTabs = 4;    % will have 7 tabs 
TabLabels = {'Home';'Battery';'Schedule';'Smart Home'}; 
  
% Get user screen size 
SC = get(0, 'ScreenSize');  % SC will be an array of [u v x y] 
MaxMonitorX = SC(3); 
MaxMonitorY = SC(4); 
  
% Set figure window size 
MainFigScale = .8;   % adjustable parameter for changing figure size 
MaxWindowX = round(MaxMonitorX*MainFigScale); 
MaxWindowY = round(MaxMonitorY*MainFigScale); 
XBorder = (MaxMonitorX-MaxWindowX)/2; 
YBorder = (MaxMonitorY-MaxWindowY)/2;  
TabOffset = 0;              % This value offsets the tabs inside the figure. 
ButtonHeight = 40; 
PanelWidth = MaxWindowX-2*TabOffset+4; 
PanelHeight = MaxWindowY-ButtonHeight-2*TabOffset; 
ButtonWidth = round((PanelWidth-NumTabs)/NumTabs); 
  
% Set colour variables 
white = [1 1 1]; grey = 0.9*white; 
  
%% Create the figure 
hTabFig = figure(... 
    'Units','pixels',... 
    'Toolbar','none',... 
    'Position', [XBorder,YBorder,MaxWindowX,MaxWindowY],... 
    'NumberTitle','off',... 
    'Name','EV Board Simulator',... 
    'MenuBar','none',... 
    'Resize','off',... 
    'DockControls','off',... 
    'Color',white); 
  
%% Define a cell array for panels and pushbutton handles, pushbutton labels and more 
TabHandles = cell(NumTabs,3);   % rows are for eah tab + 2 additional data rows 
TabHandles(:,3) = TabLabels(:,1); 
  
TabHandles{NumTabs+1,1} = hTabFig;         % Main figure handle 
TabHandles{NumTabs+1,2} = PanelWidth;      % Width of tab panel 
TabHandles{NumTabs+1,3} = PanelHeight;     % Height of tab panel 
TabHandles{NumTabs+2,1} = 0;               % Handle to default tab 2 content(set later) 
TabHandles{NumTabs+2,2} = white;           % Background color 
TabHandles{NumTabs+2,3} = grey;            % Background color 
  
%% Build the tabs 
     for TabNumber = 1:NumTabs 
        TabHandles{TabNumber,1} = uipanel('Units','pixels',... 
            'Visible','off','BackgroundColor',white,'BorderWidth',1,...
            'Position',[1 0 PanelWidth PanelHeight]); 

        TabHandles{TabNumber,2} = uicontrol('Style','pushbutton',... 
            'Units','pixels','BackgroundColor',grey,...         
            'Position',[TabOffset+(TabNumber-1)*ButtonWidth PanelHeight+TabOffset... 
            ButtonWidth ButtonHeight],'string',TabHandles{TabNumber,3},... 
                'HorizontalAlignment','center','FontName','arial','FontWeight','bold ',... 
                'FontSize',10); 
     end  

    %% Define the callbacks for the Tab Buttons 
    for CountTabs = 1:NumTabs 

    set(TabHandles{CountTabs,2},'callback',{@TabSelectCallback,CountTabs}); 
    end 
  
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



persistent number_inputs;
number_inputs = 10;
progress_step = 1;

function progress_bar(progress_step)
        %  Display the SOC gauge in the bottom right corner of the GUI 
        axes('Units','pixels','Position',[980 18 100 15]); 
        area1 = area([0 1/number_inputs],[1 1]); 
        set(gca,'xtick',[]); set(gca,'ytick',[]); 
        set(gca,'xlim',[0 1]);  
        set(gca,'ylim',[0 1]); 
        set(area1,'FaceColor','yellow');
        
        uicontrol('Style', 'text','Position', [830 15 140 18],... 
            'string',sprintf('Battery SOC: %d%%',SOC),'BackgroundColor','white',... 
            'HorizontalAlignment','left','FontName','arial','FontWeight','bold', ... 
            'FontSize', 12); 

end
